(this.webpackJsonpnetlifydemo=this.webpackJsonpnetlifydemo||[]).push([[0],{54:function(e,t,n){},55:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(13),o=n.n(s),c=(n(54),n.p,n(55),n(15)),l=n(16),r=n(9),u=n(18),d=n(17),h=(n(56),n(75),n(45)),m=n.n(h),b=n(93),p=n(1),j=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={data:[],name:a.props.selectedFiles.data.name,email:a.props.selectedFiles.data.email,id:a.props.selectedFiles.ref["@ref"].id},a.onChange=a.onChange.bind(Object(r.a)(a)),a.onSubmit=a.onSubmit.bind(Object(r.a)(a)),a}return Object(l.a)(n,[{key:"onChange",value:function(e){"userName"==e.target.name?this.setState({name:e.target.value}):this.setState({email:e.target.value})}},{key:"onSubmit",value:function(e){var t=this,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(this.state.name),email:"".concat(this.state.email),id:"".concat(this.state.id)})};fetch("/.netlify/functions/update",n).then((function(e){return e.json()})).then((function(e){alert("Successfully updated"),t.props.onHide(),window.location.reload()}))}},{key:"render",value:function(){var e=this;return Object(p.jsx)("div",{children:Object(p.jsxs)(b.a,{backdrop:"static",show:this.props.show,onHide:function(){e.props.onHide()},className:"PopUp",children:[Object(p.jsx)(b.a.Header,{closeButton:!0}),Object(p.jsxs)(b.a.Body,{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"Name"}),Object(p.jsx)("input",{type:"text",name:"userName",value:this.state.name,className:"form-control",onChange:this.onChange})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"Email"}),Object(p.jsx)("input",{type:"email",name:"email",value:this.state.email,className:"form-control",onChange:this.onChange})]}),Object(p.jsx)("button",{className:"btn btn-primary mt-3",onClick:function(t){return e.onSubmit(t)},children:"Update"})]}),Object(p.jsx)(b.a.Footer,{})]})})}}]),n}(i.a.Component),f=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleClose=function(e){a.setState({showRelatePopup:!1})},a.header=[],a.state={data:[],activePage:1,showRelatePopup:!1,selectedFiles:[]},a.fetchAll=a.fetchAll.bind(Object(r.a)(a)),a.items=a.items.bind(Object(r.a)(a)),a.handleClose=a.handleClose.bind(Object(r.a)(a)),a.onDelete=a.onDelete.bind(Object(r.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.fetchAll()}},{key:"fetchAll",value:function(){var e=this;fetch("/.netlify/functions/fetchAll").then((function(e){return e.json()})).then((function(t){e.setState({data:t})}))}},{key:"items",value:function(e,t){this.setState({showRelatePopup:!0,selectedFiles:t})}},{key:"onDelete",value:function(e,t){console.log(t.ref["@ref"].id,"id");var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:"".concat(t.ref["@ref"].id)})};fetch("/.netlify/functions/delete",n).then((function(e){return e.json()})).then((function(e){alert("Successfully Deleted"),window.location.reload()}))}},{key:"render",value:function(){var e,t=this,n="",a="",i=[];return e=this.state.data.length>0?this.state.data.map((function(e,s){return e.data.name&&(n=e.data.name),e.data.email&&(a=e.data.email),i=[Object(p.jsx)("button",{value:e.data.email,className:"btn btn-danger",onClick:function(n){return t.items(n,e)},children:"Edit"}),Object(p.jsx)("button",{value:e.data.email,className:"btn btn-danger m-2",onClick:function(n){return t.onDelete(n,e)},children:"Delete"})],{name:n,email:a,actions:i}})):"",Object(p.jsxs)("div",{className:"table table-responsive",children:[this.state.showRelatePopup&&Object(p.jsx)(j,{show:this.state.showRelatePopup,onHide:this.handleClose,selectedFiles:this.state.selectedFiles}),this.state.data.length>0&&Object(p.jsx)(m.a,{tableHeaders:[{title:"Name",prop:"name"},{title:"Email",prop:"email"},{title:"Actions",prop:"actions"}],tableBody:e,keyName:"crudtable",rowsPerPageOption:10,tableClass:"striped hover responsive tablecolor relateAlign",initialSort:{prop:"name",isAscending:!0},labels:{first:"<<",last:">>",prev:"prev",next:"next",show:"Display",entries:"rows",noResults:"There is no data available"}})]})}}]),n}(a.Component),O=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={name:"",email:""},a.userInput=a.userInput.bind(Object(r.a)(a)),a.SignUp=a.SignUp.bind(Object(r.a)(a)),a}return Object(l.a)(n,[{key:"userInput",value:function(e){"name"===e.target.name?this.setState({name:e.target.value}):"email"===e.target.name&&this.setState({email:e.target.value})}},{key:"SignUp",value:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(this.state.name),email:"".concat(this.state.email)})};fetch("/.netlify/functions/create",t).then((function(e){return e.json(console.log(e))})).then((function(e){alert("Successfully Created"),window.location.reload()}))}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:"React CRUD using FAUNA"}),Object(p.jsxs)("center",{children:[Object(p.jsx)("div",{className:"form-group col-md-4",children:Object(p.jsx)("input",{type:"text",className:"form-control",value:this.state.name,placeholder:"Enter Name",onChange:function(t){return e.userInput(t)},name:"name"})}),Object(p.jsx)("div",{className:"form-group col-md-4 mt-3",children:Object(p.jsx)("input",{type:"email",className:"form-control",value:this.state.email,placeholder:"Enter Email",onChange:function(t){return e.userInput(t)},name:"email"})}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary mt-5",onClick:function(t){return e.SignUp(t)},children:"Submit"})]})]})}}]),n}(a.Component);var v=function(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(O,{}),Object(p.jsx)(f,{})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,94)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),s(e),o(e)}))};n(88);o.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(v,{})}),document.getElementById("root")),g()}},[[89,1,2]]]);
//# sourceMappingURL=main.6b78380a.chunk.js.map