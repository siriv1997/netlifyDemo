{"ast":null,"code":"import _classCallCheck from\"/home/krkdkt029/Desktop/netlifyDemo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/krkdkt029/Desktop/netlifyDemo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/krkdkt029/Desktop/netlifyDemo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/krkdkt029/Desktop/netlifyDemo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/krkdkt029/Desktop/netlifyDemo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import ReactTable from\"react-table\";import Datatable from\"react-bs-datatable\";import EditPopUP from'../model/model';// import Pagination from \"react-js-pagination\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Userdaata=/*#__PURE__*/function(_Component){_inherits(Userdaata,_Component);var _super=_createSuper(Userdaata);function Userdaata(props){var _this;_classCallCheck(this,Userdaata);_this=_super.call(this,props);_this.handleClose=function(event){_this.setState({showRelatePopup:false});};_this.header=[];_this.state={data:[],activePage:1,showRelatePopup:false,selectedFiles:[]};_this.fetchAll=_this.fetchAll.bind(_assertThisInitialized(_this));_this.items=_this.items.bind(_assertThisInitialized(_this));_this.handleClose=_this.handleClose.bind(_assertThisInitialized(_this));_this.onDelete=_this.onDelete.bind(_assertThisInitialized(_this));return _this;}_createClass(Userdaata,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchAll();}},{key:\"fetchAll\",value:function fetchAll(){var _this2=this;fetch('/.netlify/functions/fetchAll').then(function(response){return response.json();}).then(function(data){_this2.setState({data:data});});}},{key:\"items\",value:function items(e,item){this.setState({showRelatePopup:true,selectedFiles:item});}},{key:\"onDelete\",value:function onDelete(e,item){console.log(item.ref['@ref'].id,'id');var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:\"\".concat(item.ref['@ref'].id)})};fetch('/.netlify/functions/delete',requestOptions).then(function(response){return response.json();}).then(function(data){alert(\"Successfully Deleted\");window.location.reload();});}},{key:\"render\",value:function render(){var _this3=this;var customLabels={first:\"<<\",last:\">>\",prev:\"prev\",next:\"next\",show:\"Display\",entries:\"rows\",noResults:\"There is no data available\"};var header=[{title:\"Name\",prop:\"name\"},{title:\"Email\",prop:\"email\"},{title:\"Actions\",prop:\"actions\"}];var userData;var name='';var Email='';var Actions=[];userData=this.state.data.length>0?this.state.data.map(function(item,i){// console.log(item,'item')\nif(item.data['name']){name=item.data['name'];}if(item.data['email']){Email=item.data['email'];}Actions=[/*#__PURE__*/_jsx(\"button\",{value:item.data['email'],className:\"btn btn-danger\",onClick:function onClick(e){return _this3.items(e,item);},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{value:item.data['email'],className:\"btn btn-danger m-2\",onClick:function onClick(e){return _this3.onDelete(e,item);},children:\"Delete\"})];return{name:name,email:Email,actions:Actions};}):\"\";return/*#__PURE__*/_jsxs(\"div\",{className:\"table table-responsive\",children:[this.state.showRelatePopup&&/*#__PURE__*/_jsx(EditPopUP,{show:this.state.showRelatePopup,onHide:this.handleClose,selectedFiles:this.state.selectedFiles}),this.state.data.length>0&&/*#__PURE__*/_jsx(Datatable,{tableHeaders:header,tableBody:userData,keyName:\"crudtable\",rowsPerPageOption:10,tableClass:\"striped hover responsive tablecolor relateAlign\",initialSort:{prop:\"name\",isAscending:true},labels:customLabels})]});}}]);return Userdaata;}(Component);export{Userdaata as default};","map":{"version":3,"sources":["/home/krkdkt029/Desktop/netlifyDemo/src/components/read/read.js"],"names":["React","Component","ReactTable","Datatable","EditPopUP","Userdaata","props","handleClose","event","setState","showRelatePopup","header","state","data","activePage","selectedFiles","fetchAll","bind","items","onDelete","fetch","then","response","json","e","item","console","log","ref","id","requestOptions","method","headers","body","JSON","stringify","alert","window","location","reload","customLabels","first","last","prev","next","show","entries","noResults","title","prop","userData","name","Email","Actions","length","map","i","email","actions","isAscending"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport ReactTable from \"react-table\";  \nimport Datatable from \"react-bs-datatable\";\nimport EditPopUP from '../model/model';\n// import Pagination from \"react-js-pagination\";\n\nexport default class Userdaata extends Component {\n    componentDidMount(){\n      this.fetchAll();\n    }\n    constructor(props){\n        super(props)\n        this.header = [];\n        this.state = { \n          data:[],\n          activePage:1,\n          showRelatePopup:false,\n          selectedFiles:[]\n        }\n        this.fetchAll = this.fetchAll.bind(this);\n        this.items = this.items.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n        this.onDelete = this.onDelete.bind(this);\n    }\n    fetchAll(){\n        fetch('/.netlify/functions/fetchAll')\n        .then(response => response.json())\n        .then(data => {\n           this.setState({data:data})\n        });\n    }\n\n    items(e,item)\n    {\n      this.setState({ showRelatePopup: true,selectedFiles:item });\n    }\n\n    onDelete(e,item)\n    {\n      console.log(item.ref['@ref'].id,'id')\n      const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ id:`${item.ref['@ref'].id}` })\n      };\n      fetch('/.netlify/functions/delete',requestOptions)\n      .then(response => response.json())\n      .then(data => {\n        alert(\"Successfully Deleted\")\n        window.location.reload();\n      });\n    }\n    \n    handleClose = (event) => {\n      this.setState({\n        showRelatePopup:false\n      });\n    }\n\n  render() {\n    const customLabels = {\n      first: \"<<\",\n      last: \">>\",\n      prev: \"prev\",\n      next: \"next\",\n      show: \"Display\",\n      entries: \"rows\",\n      noResults: \"There is no data available\"\n    };\n    const header = [\n        { title: \"Name\", prop: \"name\" },\n        { title: \"Email\", prop: \"email\" },\n        { title: \"Actions\", prop: \"actions\" }\n    ];\n    let userData;\n    let name='';\n    let Email = '';\n    let Actions=[];\n    userData = this.state.data.length>0\n    ? \n      this.state.data.map((item, i) => {\n        // console.log(item,'item')\n      if(item.data['name'])\n      {\n        name=item.data['name'];\n      }\n      if(item.data['email'])\n      {\n        Email=item.data['email']\n      }\n      Actions=[\n        <button value={item.data['email']} className='btn btn-danger' onClick={e => this.items(e, item)}>Edit</button>,\n        <button value={item.data['email']} className='btn btn-danger m-2' onClick={e => this.onDelete(e, item)}>Delete</button>\n      ]\n      return {\n        name:name,\n        email:Email,\n        actions:Actions\n      };\n      }):\"\";\n\n    return (\n          <div className={\"table table-responsive\"}>\n            {this.state.showRelatePopup && (\n              <EditPopUP\n                show={this.state.showRelatePopup}\n                onHide={this.handleClose}\n                selectedFiles={this.state.selectedFiles}\n              />\n            )}\n            {this.state.data.length > 0 && (\n              <Datatable\n                tableHeaders={header}\n                tableBody={userData}\n                keyName=\"crudtable\"\n                rowsPerPageOption={10}\n                tableClass=\"striped hover responsive tablecolor relateAlign\"\n                initialSort={{ prop: \"name\", isAscending: true }}\n                labels={customLabels}\n              />\n            )}\n          </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}